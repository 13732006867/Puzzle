!function(){"use strict";var e,t,n,o,a,s,i,g,r,l,c,d,m,u,h,f,b,v,y,_,p,P,w,I,k,L,E,A,T,S,D,x=!!window.HTMLCanvasElement,R=new Kinetic.Layer({name:"g_layer"}),C=new Kinetic.Layer({name:"g_back_g_layer"}),M=new Kinetic.Stage({container:"container",width:document.getElementById("container").width,height:document.getElementById("container").height}),B=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),X=!1,Y=0,H=0,z=!1,N=2,K=new Image,O="",F=4,W=6,j=15,q=0,U=!1,Z=!1,G=!1,V=!0,J=!0,Q=!0,$=!0,ee=!1,te=!0,ne=!0,oe=!1,ae=function(e){return document.getElementById(e)},se=ae("select_theme_img"),ie=ae("b_back_g_grid"),ge=ae("b_back_g_image"),re=ae("b_rotate"),le=ae("b_sound"),ce=ae("container"),de=ae("b_gold"),me=ae("b_gold_enabled"),ue=ae("b_gold_disabled"),he=ae("b_prev"),fe=ae("b_next"),be=ae("bt_easy"),ve=ae("bt_med"),ye=ae("bt_hard"),_e=ae("bt_close"),pe=ae("b_image_input"),Pe=ae("iPopupInfo"),we=ae("iPopupSettings"),Ie=ae("iPopupHelp"),ke=ae("img_help"),Le=ae("lb_help"),Ee=ae("game"),Ae=ae("title"),Te=function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();function Se(e){e.classList.remove("popup-init"),e.classList.remove("popup-hide"),e.classList.add("popup-show")}function De(e){e.classList.remove("popup-show"),e.classList.add("popup-hide"),setTimeout((function(){e.scrollTop=0}),1050)}function xe(){Z=!0,U=!1}function Re(){var e;De(Ie),setTimeout((function(){ae("iCloseHelp").classList.remove("dn"),ke.style.height=null,ke.style.padding=null}),500),Ae.classList.remove("swipe-out-right"),Ee.classList.remove("swipe-in-left"),Ae.classList.add("swipe-out"),Ee.classList.add("swipe-in"),setTimeout((function(){var t=R.getChildren();for(e=0;e<t.length;e+=1)t[e].setZIndex(Math.floor(Math.random()*W*F));for(e=0;e<t.length;e+=1)G?new Kinetic.Tween({node:t[e],x:Math.floor(Math.random()*k*(W-1))+k/2,y:Math.floor(Math.random()*L*(F-1))+L/2,rotation:.5*Math.PI*Math.floor(4*Math.random()),duration:1,onFinish:xe()}).play():new Kinetic.Tween({node:t[e],x:Math.floor(Math.random()*k*(W-1))+k/2,y:Math.floor(Math.random()*L*(F-1))+L/2,duration:1,onFinish:xe()}).play()}),2e3)}function Ce(e,t,n,o){!function(){var a;if(V){var s=new Kinetic.Shape({drawFunc:function(o){o.beginPath(),o.moveTo(w,I),0===t?o.lineTo(w+k,I):(o.bezierCurveTo(w+.8*k,I+.1*L*n,w,I-.25*L*n,w+k/2,I-.25*L*n),o.bezierCurveTo(w+k,I-.25*L*n,w+.2*k,I+.1*L*n,w+k,I)),e===W-1?o.lineTo(w+k,I+L):(o.bezierCurveTo(w+k+.1*k*n,I+.8*L,w+k-.25*k*n,I,w+k-.25*k*n,I+L/2),o.bezierCurveTo(w+k-.25*k*n,I+L,w+k+.1*k*n,I+.2*L,w+k,I+L)),t===F-1?o.lineTo(w,I+L):(o.bezierCurveTo(w+.2*k,I+L-.1*L*n,w+k,I+L+.25*L*n,w+k/2,I+L+.25*L*n),o.bezierCurveTo(w,I+L+.25*L*n,w+.8*k,I+L-.1*L*n,w,I+L)),0===e?o.lineTo(w,I):(o.bezierCurveTo(w-.1*k*n,I+.2*L,w+.25*k*n,I+L,w+.25*k*n,I+L/2),o.bezierCurveTo(w+.25*k*n,I,w-.1*k*n,I+.8*L,w,I)),o.closePath(),o.fillStrokeShape(this)},fillPatternImage:o,fillPatternOffset:[e*k,t*L],stroke:"black",strokeWidth:4});s.toImage({width:k+.6*k,height:L+.6*L,x:.3*-k,y:.3*-L,callback:function(n){Fe(a=new Kinetic.Image({image:n,x:e*k+k/2,origX:e*k+k/2,y:t*L+L/2,origY:t*L+L/2,row:t,col:e,offset:[k/2+.3*k,L/2+.3*L],draggable:!0,dragBoundFunc:function(e){var t=e.y,n=e.x;return n<0&&(n=0),n>c&&(n=c),t<0&&(t=0),t>d&&(t=d),{x:n,y:t}},name:"part_z"+t+"_s"+e})),a.createImageHitRegion((function(){R.drawHit()}))}}),s.setStrokeWidth(null),s.setStroke(null),s.toImage({width:k+.6*k,height:L+.6*L,x:.3*-k,y:.3*-L,callback:function(n){y[t][e]=n}})}else Fe(a=new Kinetic.Image({x:e*k+k/2,origX:e*k+k/2,y:t*L+L/2,origY:t*L+L/2,row:t,col:e,width:k,height:L,offset:[k/2,L/2],crop:{x:o.width/W*e,y:o.height/F*t,width:o.width/W,height:o.height/F},stroke:"black",strokeWidth:4,fill:"black",Image:o,draggable:!0,dragBoundFunc:function(e){var t=e.y,n=e.x;return n<0&&(n=0),n>c&&(n=c),t<0&&(t=0),t>d&&(t=d),{x:n,y:t}},name:"part_z"+t+"_s"+e}))}()}function Me(){var e,t;for(y=[],e=0;e<F;e+=1)y[e]=[];q=0,R.removeChildren(),C.removeChildren(),M.removeChildren(),M.setWidth(c),M.setHeight(d),w=0,I=0,k=c/W,L=d/F,1,M.add(R);var n=c,o=d;B&&(o/=function(e,t){var n=document.createElement("canvas");n.width=1,n.height=t;var o=n.getContext("2d");o.drawImage(e,0,0);for(var a=o.getImageData(0,0,1,t).data,s=0,i=t,g=t;g>s;)0===a[4*(g-1)+3]?i=g:s=g,g=i+s>>1;var r=g/t;return 0===r?1:r}(K,K.naturalHeight));0!==E.getPos()||5!==g&&6!==g&&7!==g&&8!==g||(n=d,o=c);var a=new Kinetic.Image({width:n,height:o,crop:{x:0,y:0,width:K.width,height:K.height},Image:K});0!==E.getPos()||5!==g&&6!==g||(a.setRotationDeg(90),a.setX(c)),0!==E.getPos()||3!==g&&4!==g||(a.setRotationDeg(180),a.setX(c),a.setY(d)),0!==E.getPos()||7!==g&&8!==g||(a.setRotationDeg(270),a.setY(d)),a.toImage({width:c,height:d,callback:function(n){if((J||Q)&&function(e){var t,n,o,a;if(Q&&(t=new Kinetic.Image({x:0,y:0,width:c,height:d,Image:e,opacity:.1}),C.add(t),C.draw()),J)for(n=0;n<F;n+=1)for(o=0;o<W;o+=1)a=new Kinetic.Rect({x:o*k,y:n*L,width:k,height:L,stroke:"#333333",strokeWidth:2}),C.add(a);M.add(C),C.moveToBottom()}(n),V)a.toImage({width:c,height:d,callback:function(n){for(t=0;t<F;t+=1)for(e=0;e<W;e+=1)Ce(e,t,t%2!=0&&e%2!=0||t%2==0&&e%2==0?1:-1,n);R.draw(),Re()}});else{for(t=0;t<F;t+=1)for(e=0;e<W;e+=1)Ce(e,t,t%2!=0&&e%2!=0||t%2==0&&e%2==0?1:-1,n);R.draw(),Re()}}})}function Be(){if(p=E.getPos(),_=parseInt(ae("nav"+p).getElementsByClassName("selected")[0].getAttribute("data-num"),10),!U)return void 0===_||void 0===a&&0===p?(ke.src="Images/photo.svg",Le.innerHTML=document.webL10n.get("lb_choose"),void Se(Ie)):void(p>0&&te&&ae("image"+p+"-"+_).classList.contains("locked")||(U=!0,ke.src="Images/loading.svg",ke.style.height="70px",ke.style.padding="5px",Le.innerHTML=document.webL10n.get("lb_load"),ae("iCloseHelp").classList.add("dn"),Se(Ie),J=ie.checked,Q=ge.checked,G=re.checked,$=le.checked,Te&&(localStorage.setItem("s_back_g_grid",ie.checked?"on":"off"),localStorage.setItem("s_backg_image",ge.checked?"on":"off"),localStorage.setItem("s_rotate",re.checked?"on":"off"),localStorage.setItem("s_sound",le.checked?"on":"off")),document.getElementById("container").width=r,document.getElementById("container").height=l,d=l,c=r,u=O,0!==p?(i=void 0!==window.devicePixelRatio?window.devicePixelRatio:1,s=Math.min(l,r)*i<=270?"s":Math.min(l,r)*i>1080?"l":"",o="Images/"+t+"/image-set-"+p+"/sujet"+O+_+s+".jpg"):o=a,K.addEventListener("load",Me),K.src=o))}function Xe(e,t,n,o){var a,s,i,g,r,l,m;if("g_layer"===e.getParent().attrs.name)if("g_layer"===t.getParent().attrs.name){t.setX(n),t.setY(o);var u=new Kinetic.Group({draggable:!0,dragBoundFunc:function(e){var t=e.y,n=e.x;return n<0&&(n=0),n>c&&(n=c),t<0&&(t=0),t>d&&(t=d),{x:n,y:t}}});e.moveTo(u),t.moveTo(u),e.setDraggable(!1),t.setDraggable(!1),R.add(u)}else g=e.getX(),r=e.getY(),t.getParent().setX(t.getParent().getX()+n-t.getAbsolutePosition().x),t.getParent().setY(t.getParent().getY()+o-t.getAbsolutePosition().y),e.moveTo(t.getParent()),e.setRotationDeg(t.getRotationDeg()),l=g-e.getAbsolutePosition().x,m=r-e.getAbsolutePosition().y,0===e.getParent().getRotationDeg()&&(e.setX(e.getX()+l),e.setY(e.getY()+m)),90===e.getParent().getRotationDeg()&&(e.setY(e.getY()-l),e.setX(e.getX()+m)),180===e.getParent().getRotationDeg()&&(e.setX(e.getX()-l),e.setY(e.getY()-m)),270===e.getParent().getRotationDeg()&&(e.setY(e.getY()+l),e.setX(e.getX()-m)),e.setDraggable(!1);else if("g_layer"===t.getParent().attrs.name)t.moveTo(e.getParent()),t.setAbsolutePosition(n,o),t.setRotationDeg(e.getRotationDeg()),t.setDraggable(!1);else{s=t.getParent().getChildren();for(var h=n-t.getAbsolutePosition().x,f=o-t.getAbsolutePosition().y;s.length>0;)void 0!==s[0]&&(g=(i=s[0]).getAbsolutePosition().x,r=i.getAbsolutePosition().y,i.moveTo(e.getParent()),i.setRotationDeg(e.getRotationDeg()),l=g-i.getAbsolutePosition().x+h,m=r-i.getAbsolutePosition().y+f,0===e.getParent().getRotationDeg()&&(i.setX(i.getX()+l),i.setY(i.getY()+m)),90===e.getParent().getRotationDeg()&&(i.setY(i.getY()-l),i.setX(i.getX()+m)),180===e.getParent().getRotationDeg()&&(i.setX(i.getX()-l),i.setY(i.getY()-m)),270===e.getParent().getRotationDeg()&&(i.setY(i.getY()+l),i.setX(i.getX()-m)))}var b=(s=e.getParent().getChildren())[0].getAbsolutePosition().x,v=s[0].getAbsolutePosition().x,y=s[0].getAbsolutePosition().y,_=s[0].getAbsolutePosition().y;for(a=0;a<s.length;a+=1)s[a].getAbsolutePosition().x<b&&(b=s[a].getAbsolutePosition().x),s[a].getAbsolutePosition().x>v&&(v=s[a].getAbsolutePosition().x),s[a].getAbsolutePosition().y<y&&(y=s[a].getAbsolutePosition().y),s[a].getAbsolutePosition().y>_&&(_=s[a].getAbsolutePosition().y);g=e.getAbsolutePosition().x,r=e.getAbsolutePosition().y,e.getParent().setOffset(0,0),e.getParent().setX((b+v)/2),e.getParent().setY((y+_)/2),l=g-e.getAbsolutePosition().x,m=r-e.getAbsolutePosition().y,0===e.getParent().getRotationDeg()&&e.getParent().setOffset(-1*l,-1*m),90===e.getParent().getRotationDeg()&&e.getParent().setOffset(-1*m,l),180===e.getParent().getRotationDeg()&&e.getParent().setOffset(l,m),270===e.getParent().getRotationDeg()&&e.getParent().setOffset(m,-1*l),"g_layer"===t.getParent().attrs.name?t.moveToTop():t.getParent().moveToTop(),R.draw(),$&&document.getElementById("click_sound").play()}function Ye(e){var t,n,o,a,s=[-1,1,0,0],i=[0,0,-1,1];for(f="g_layer"===e.getParent().attrs.name?e.getRotationDeg():(e.getRotationDeg()+e.getParent().getRotationDeg())%360,t=0;t<s.length;t+=1)(a=M.get(".part_z"+(e.attrs.row+i[t])+"_s"+(e.attrs.col+s[t]))).length>0&&(b="g_layer"===a[0].getParent().attrs.name?a[0].getRotationDeg():(a[0].getRotationDeg()+a[0].getParent().getRotationDeg())%360,0===f&&(n=e.getAbsolutePosition().x+k*s[t],o=e.getAbsolutePosition().y+L*i[t]),90===f&&(n=e.getAbsolutePosition().x-L*i[t],o=e.getAbsolutePosition().y+k*s[t]),180===f&&(n=e.getAbsolutePosition().x-k*s[t],o=e.getAbsolutePosition().y-L*i[t]),270===f&&(n=e.getAbsolutePosition().x+L*i[t],o=e.getAbsolutePosition().y-k*s[t]),Math.abs(n-a[0].getAbsolutePosition().x)<j&&Math.abs(o-a[0].getAbsolutePosition().y)<j&&f===b&&("g_layer"===e.getParent().attrs.name||"g_layer"===a[0].getParent().attrs.name||e.getParent()!==a[0].getParent())&&Xe(e,a[0],n,o))}function He(e){void 0!==e&&(e.setX(e.attrs.origX),e.setY(e.attrs.origY),e.setRotationDeg(0),e.moveToBottom(),e.setStrokeWidth(null),e.setStroke(null),e.setDraggable(!1),V&&e.setImage(y[e.attrs.row][e.attrs.col]),R.draw(),V&&e.disableShadow(),$&&document.getElementById("click_sound").play(),document.body.style.cursor="default",setTimeout((function(){(q+=1)===W*F&&(_e.classList.add("dn"),$&&document.getElementById("ding_sound").play())}),500))}function ze(){Te&&localStorage.setItem("s_gold",de.checked?"on":"off"),!0===de.checked?(ee=!0,ae("img_easy").src="Images/easy_gold.svg",ae("img_med").src="Images/medium_gold.svg",ae("img_hard").src="Images/hard_gold.svg"):(ee=!1,ae("img_easy").src="Images/easy.svg",ae("img_med").src="Images/medium.svg",ae("img_hard").src="Images/hard.svg")}function Ne(){var e,n,o,a,s=0;for(e=1;e<5;e+=1)for(n=1;n<4;n+=1)o=Te&&localStorage.getItem(t+e+O+n)||0,s+=parseInt(o),te?o>0?((a=ae("medal"+e+"-"+n)).classList.remove("dn"),a.src="Images/medal"+o+".svg",n<3&&(ae("image"+e+"-"+(n+1)).classList.remove("locked"),ae("lock"+e+"-"+(n+1)).classList.add("dn"))):(ae("medal"+e+"-"+n).classList.add("dn"),n<3&&(ae("image"+e+"-"+(n+1)).classList.add("locked"),ae("lock"+e+"-"+(n+1)).classList.remove("dn"))):(ae("medal"+e+"-"+n).classList.add("dn"),ae("image"+e+"-"+(n+1)).classList.remove("locked"),ae("lock"+e+"-"+(n+1)).classList.add("dn"));36===s?(me.style.display="block",de.checked=!0,ze(),ue.style.display="none"):(ue.style.display="block",de.checked=!1,ze(),me.style.display="none")}function Ke(){var e,o;if(l=document.documentElement.clientHeight,r=document.documentElement.clientWidth,O="",l>r&&(O="p"),navigator.onLine){for(e=1;e<N+1;e+=1)for(o=1;o<4;o+=1)ae("image"+e+"-"+o).src="Images/"+t+"/image-set-"+e+"/sujet"+O+o+"s.jpg";for(let e of document.querySelectorAll(".offline"))e.style.display="none";for(let e of document.querySelectorAll(".online"))e.style.display="block"}else{for(let e of document.querySelectorAll(".offline"))e.style.display="block";for(let e of document.querySelectorAll(".online"))e.style.display="none";E.slide(0,0)}t===n&&O===m||(n=t,m=O,Ne())}function Oe(e){var n;_e.classList.remove("dn"),e&&(n=Te&&localStorage.getItem(t+p+u+_)||0,parseInt(P)>parseInt(n)&&(Te&&localStorage.setItem(t+p+u+_,P),Ne(),$&&document.getElementById("ding_sound").play())),Ae.classList.remove("swipe-out"),Ee.classList.remove("swipe-in"),Ae.classList.add("swipe-out-right"),Ee.classList.add("swipe-in-left"),Ke(),setTimeout((function(){Ke()}),500)}function Fe(e){var t;e.on("mouseover",(function(){(e.getDraggable()||e.getParent().getDraggable())&&Z&&(document.body.style.cursor="pointer")})),e.on("click tap",(function(){!1!==oe&&((e.getDraggable()||e.getParent().getDraggable())&&Z&&G&&h===R.getChildren().length-1?"g_layer"===e.getParent().attrs.name?(t=e.getRotation(),Z=!1,new Kinetic.Tween({node:e,duration:.5,rotation:t+Math.PI/2,onFinish:function(){Z=!0,360===e.getRotationDeg()&&e.setRotationDeg(0),e.fire("dragend")}}).play()):(t=e.getParent().getRotation(),Z=!1,new Kinetic.Tween({node:e.getParent(),duration:.5,rotation:t+Math.PI/2,onFinish:function(){Z=!0,360===e.getParent().getRotationDeg()&&e.getParent().setRotationDeg(0),e.fire("dragend")}}).play()):q===W*F?(Z=!1,Oe(!0)):e.fire("dragend"))})),e.on("mousedown touchstart",(function(){oe=!0,setTimeout((function(){oe=!1}),500),v=e,(e.getDraggable()||e.getParent().getDraggable())&&Z&&("g_layer"===e.getParent().attrs.name?(h=e.getZIndex(),e.moveToTop()):(h=e.getParent().getZIndex(),e.getParent().moveToTop()))})),e.on("dragend",(function(){(e.getDraggable()||e.getParent().getDraggable())&&Z?function(e){var t,n,o;if(f="g_layer"===e.getParent().attrs.name?e.getRotationDeg():(e.getRotationDeg()+e.getParent().getRotationDeg())%360,Math.abs(e.getAbsolutePosition().x-e.attrs.origX)<j&&Math.abs(e.getAbsolutePosition().y-e.attrs.origY)<j&&0===f)if("g_layer"===e.getParent().attrs.name)He(e);else for(n=e.getParent().getChildren();n.length>0;)(o=n[0]).moveTo(R),He(o);else if("g_layer"===e.getParent().attrs.name)Ye(e);else for(n=e.getParent().getChildren(),t=0;t<n.length;t+=1)Ye(n[t])}(e):q===W*F&&(Z=!1,Oe(!0))})),e.on("mouseout",(function(){document.body.style.cursor="default"})),R.add(e),R.draw(),M.draw()}function We(e){var t;if("Safari,5.1.7"===navigator.sayswho||"MSIE,9.0"===navigator.sayswho)return ke.src="Images/photo.svg",Le.innerHTML=document.webL10n.get("lb_own_img"),void Se(Ie);if((t=e.target.files[0]).type.match("image.*")){var n=new FileReader;n.onload=function(t){a=t.target.result,EXIF.getData(e.target.files[0],(function(){g=EXIF.getTag(this,"Orientation")})),ae("image0-1").src=a,ae("imageOff").src=a,Ke(),setTimeout((function(){Ke()}),500)},n.readAsDataURL(t)}}function je(e){t=e,se.src="Images/"+t+"/theme.png",X&&(ae("select_theme").innerHTML=document.webL10n.get("lb_"+t)),Te&&localStorage.setItem("s_theme",e),Ke()}function qe(){0===E.getPos()?ae("bullets0").src="Images/bullets1o.svg":ae("bullets0").src="Images/bullets0o.svg",1===E.getPos()?ae("bullets1").src="Images/bullets1.svg":ae("bullets1").src="Images/bullets0.svg",2===E.getPos()?ae("bullets2").src="Images/bullets1.svg":ae("bullets2").src="Images/bullets0.svg",3===E.getPos()?ae("bullets3").src="Images/bullets1.svg":ae("bullets3").src="Images/bullets0.svg",4===E.getPos()?ae("bullets4").src="Images/bullets1.svg":ae("bullets4").src="Images/bullets0.svg"}function Ue(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null!==t&&t[1]}"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("sw.js").then((function(e){}),(function(e){}))})),ce.addEventListener("mouseup",(function(){void 0!==v&&"g_layer"!==v.getParent().attrs.name&&setTimeout((function(){v.fire("dragend")}),350)}),!1),ce.addEventListener("touchend",(function(){void 0!==v&&"g_layer"!==v.getParent().attrs.name&&setTimeout((function(){v.fire("dragend")}),350)}),!1),Array.from(document.getElementsByClassName("own-nav")).forEach((function(e){e.addEventListener("click",(function(){if("Safari,5.1.7"===navigator.sayswho||"MSIE,9.0"===navigator.sayswho)return ke.src="Images/photo.svg",Le.innerHTML=document.webL10n.get("lb_own_img"),void Se(Ie);"file"!==pe.type?window.MozActivity&&(new MozActivity({name:"pick",data:{type:"image/jpeg"}}).onsuccess=function(){a=window.URL.createObjectURL(this.result.blob),ae("image0-1").src=a,ae("imageOff").src=a,Ke(),setTimeout((function(){Ke()}),500)}):pe.click()}))})),window.onload=function(){ne&&(ne=!1,ae("iInfo").addEventListener("click",(function(){Se(Pe)})),ae("iInfoClose").addEventListener("click",(function(){De(Pe)})),ae("iSettings").addEventListener("click",(function(){z||(z=!0,ae("t_europe").src="Images/europe/theme.png",ae("t_asia").src="Images/asia/theme.png",ae("t_america").src="Images/america/theme.png",ae("t_animals").src="Images/animals/theme.png",ae("t_flowers").src="Images/flowers/theme.png",ae("t_tricky").src="Images/tricky/theme.png",ae("t_mascha").src="Images/mascha/theme.png",ae("t_mascha2").src="Images/mascha2/theme.png",ae("t_mascha3").src="Images/mascha3/theme.png",ae("t_shrek").src="Images/shrek/theme.png"),Se(we)})),ae("iSettingsClose").addEventListener("click",(function(){De(we)})),ae("iCloseHelp").addEventListener("click",(function(){De(Ie)})),Ie.addEventListener("click",(function(){ae("iCloseHelp").classList.contains("dn")||De(Ie)})),ae("bt_theme").addEventListener("click",(function(){document.getElementsByClassName("dropdown")[0].classList.toggle("show"),document.getElementsByClassName("icon")[0].classList.toggle("rotate")})),de.addEventListener("change",e=>{ze()}),E=new Swipe(document.getElementById("image_slider"),{startSlide:1,callback:function(e,t){ae("bullets0").src=0===t?"Images/bullets1o.svg":"Images/bullets0o.svg",1===t?ae("bullets1").src="Images/bullets1.svg":(ae("bullets1").src="Images/bullets0.svg",N=4,Ke()),ae("bullets2").src=2===t?"Images/bullets1.svg":"Images/bullets0.svg",ae("bullets3").src=3===t?"Images/bullets1.svg":"Images/bullets0.svg",ae("bullets4").src=4===t?"Images/bullets1.svg":"Images/bullets0.svg"}}),document.getElementById("b_image_input").addEventListener("change",We,!1),Array.from(document.getElementsByClassName("list-button-33-sel")).forEach((function(e){e.addEventListener("click",(function(){event,Array.from(event.target.parentNode.getElementsByClassName("list-button-33-sel")).forEach((function(e){e.classList.remove("selected")})),event.target.classList.add("selected")}))})),he.addEventListener("click",(function(e){E.prev(),qe(),e.preventDefault()})),fe.addEventListener("click",(function(e){E.next(),qe(),e.preventDefault()})),be.addEventListener("click",(function(){P="1",l>r?ee?(F=9,W=6):(F=3,W=2):ee?(F=6,W=9):(F=2,W=3),Be()})),ve.addEventListener("click",(function(){P="2",l>r?ee?(F=12,W=8):(F=6,W=4):ee?(F=8,W=12):(F=4,W=6),Be()})),ye.addEventListener("click",(function(){P="3",l>r?ee?(F=18,W=12):(F=8,W=5):ee?(F=12,W=18):(F=5,W=8),Be()})),_e.addEventListener("click",(function(){Z=!1,Oe(!1)})),ae("s_mascha").addEventListener("click",(function(){(Y+=1)>2&&(Array.from(document.getElementsByClassName("t_mascha")).forEach((function(e){e.classList.remove("dn")})),Te&&localStorage.setItem("s_mascha","true"))})),ae("s_grrd").addEventListener("click",(function(){(H+=1)>5&&(ae("t_shrek").parentNode.classList.remove("dn"),ae("favicon").href="Images/favicon_dark.ico",Te&&localStorage.setItem("s_shrek","true"))})),Array.from(document.getElementsByClassName("dropdown"))[0].childNodes.forEach((function(e){e.addEventListener("click",(function(){je(e.getElementsByTagName("img")[0].getAttribute("alt")),document.getElementsByClassName("dropdown")[0].classList.remove("show"),document.getElementsByClassName("icon")[0].classList.remove("rotate")}))})),Te?(null===localStorage.getItem("s_back_g_grid")?ie.checked=!0:ie.checked="on"===localStorage.getItem("s_back_g_grid"),null===localStorage.getItem("s_backg_image")?ge.checked=!0:ge.checked="on"===localStorage.getItem("s_backg_image"),null===localStorage.getItem("s_rotate")?re.checked=!1:re.checked="on"===localStorage.getItem("s_rotate"),null===localStorage.getItem("s_sound")?le.checked=!0:le.checked="on"===localStorage.getItem("s_sound"),null===localStorage.getItem("s_gold")?(de.checked=!1,ze()):(de.checked="on"===localStorage.getItem("s_gold"),ze()),null===localStorage.getItem("s_theme")?je("animals"):je(localStorage.getItem("s_theme"))):(ie.checked=!0,ge.checked=!0,re.checked=!1,le.checked=!0,de.checked=!1,ze(),je("animals")),("true"===(e=Ue("mascha"))||Te&&"true"===localStorage.getItem("s_mascha"))&&(Array.from(document.getElementsByClassName("t_mascha")).forEach((function(e){e.classList.remove("dn")})),Te&&localStorage.setItem("s_mascha","true")),("true"===(e=Ue("shrek"))||Te&&"true"===localStorage.getItem("s_shrek"))&&(ae("t_shrek").parentNode.classList.remove("dn"),ae("favicon").href="Images/favicon_dark.ico",Te&&localStorage.setItem("s_shrek","true")),(e=Ue("theme"))&&je(e),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(he.style.display="none",fe.style.display="none"),Ke(),setTimeout((function(){Ke()}),500))},window.addEventListener("resize",(function(){Ke()})),navigator.sayswho=(A=navigator.appName,T=navigator.userAgent,S=T.match(/version\/([.\d]+)/i),(D=T.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!==S&&(D[2]=S[1]),D=D?[D[1],D[2]]:[A,navigator.appVersion,"-?"]),document.webL10n.ready((function(){X=!0,(e=Ue("lang"))&&e!==document.webL10n.getLanguage()&&(document.webL10n.setLanguage(e),X=!1)})),document.addEventListener("localized",(function(){X&&(document.documentElement.lang=document.webL10n.getLanguage().substr(0,2),document.querySelector("meta[name='description']").setAttribute("content",document.webL10n.get("lb_desc")),document.querySelector("link[rel='manifest']").href="Manifest/appmanifest_"+document.webL10n.getLanguage().substr(0,2)+".json",document.querySelector("link[rel='canonical']").href="https://grrd01.github.io/Puzzle/?lang="+document.webL10n.getLanguage().substr(0,2),ae("select_theme").innerHTML=document.webL10n.get("lb_"+t),ae("imageOff").setAttribute("alt",document.webL10n.get("lb_image")),ae("image0-1").setAttribute("alt",document.webL10n.get("lb_image")),x||(ke.src="Images/piece_gold.png",Le.innerHTML=document.webL10n.get("lb_html5"),Se(Ie)),setTimeout((function(){new Date("10/25/2019")>new Date&&"flowers"!==t&&Te&&"flowers"!==localStorage.getItem("s_new_theme")&&(ke.src="Images/flowers/theme.png",Le.innerHTML=document.webL10n.get("lb_new_theme")+" "+document.webL10n.get("lb_flowers"),Se(Ie))}),500)),X=!0}))}();